<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ef56b68f8fa1e9d2ba328e99e439f80.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Prof.&nbsp;Calvin">
  <title>Scientific Computing – SymPy</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-d2035c3dfe23416ef91e35a2117334e1.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">SymPy</h1>
  <p class="subtitle">Scientific Computing</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof.&nbsp;Calvin 
</div>
</div>
</div>

</section>
<section>
<section id="what-is-sympy" class="title-slide slide level1 center">
<h1>What is SymPy?</h1>
<blockquote>
<p><a href="https://www.sympy.org/en/index.html">A Python library for symbolic mathematics. It aims to become a full-featured computer algebra system (CAS) while keeping the code as simple as possible in order to be comprehensible and easily extensible. SymPy is written entirely in Python.</a></p>
</blockquote>
<ul>
<li><strong>Sym</strong>bolic <strong>Py</strong>thon</li>
</ul>
</section>
<section id="why-sympy" class="slide level2">
<h2>Why SymPy</h2>
<ul>
<li>“SymPy is free both as in speech and as in beer.”</li>
<li>“Most computer algebra systems invent their own language. Not SymPy.”</li>
<li>“An advantage of SymPy is that it is lightweight.”</li>
</ul>
</section>
<section id="why-not-sympy" class="slide level2">
<h2>Why not SymPy</h2>
<ul>
<li>To my knowledge, there’s no real competitors with SymPy.</li>
<li>The closest are probably SageMath and Mathematica.</li>
<li>I use browser-based Mathematica via <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a> from time to time (when I don’t have a Python installation handy).</li>
</ul>
</section>
<section id="cite" class="slide level2">
<h2>Cite</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bibtex number-lines code-with-copy"><code class="sourceCode bibtex"><span id="cb1-1"><a></a><span class="va">@article</span>{<span class="ot">10</span>.<span class="ot">7717</span>/<span class="ot">peerj</span>-<span class="ot">cs</span>.<span class="ot">103</span>,</span>
<span id="cb1-2"><a></a>     <span class="dt">title</span> = {SymPy: symbolic computing in Python},</span>
<span id="cb1-3"><a></a>     <span class="dt">author</span> = {Meurer, Aaron and Smith, Christopher P. and Paprocki, Mateusz and <span class="ch">\v</span>{C}ert<span class="ch">\'</span>{i}k, Ond<span class="ch">\v</span>{r}ej and Kirpichev, Sergey B. and Rocklin, Matthew and Kumar, AMiT and Ivanov, Sergiu and Moore, Jason K. and Singh, Sartaj and Rathnayake, Thilina and Vig, Sean and Granger, Brian E. and Muller, Richard P. and Bonazzi, Francesco and Gupta, Harsh and Vats, Shivam and Johansson, Fredrik and Pedregosa, Fabian and Curry, Matthew J. and Terrel, Andy R. and Rou<span class="ch">\v</span>{c}ka, <span class="ch">\v</span>{S}t<span class="ch">\v</span>{e}p<span class="ch">\'</span>{a}n and Saboo, Ashutosh and Fernando, Isuru and Kulal, Sumith and Cimrman, Robert and Scopatz, Anthony},</span>
<span id="cb1-4"><a></a>     <span class="dt">year</span> = 2017,</span>
<span id="cb1-5"><a></a>     <span class="dt">month</span> = <span class="st">jan</span>,</span>
<span id="cb1-6"><a></a>     <span class="dt">keywords</span> = {Python, Computer algebra system, Symbolics},</span>
<span id="cb1-7"><a></a>     <span class="dt">abstract</span> = {</span>
<span id="cb1-8"><a></a>                SymPy is an open source computer algebra system written in pure Python. It is built with a focus on extensibility and ease of use, through both interactive and programmatic applications. These characteristics have led SymPy to become a popular symbolic library for the scientific Python ecosystem. This paper presents the architecture of SymPy, a description of its features, and a discussion of select submodules. The supplementary material provide additional examples and further outline details of the architecture and features of SymPy.</span>
<span id="cb1-9"><a></a>             },</span>
<span id="cb1-10"><a></a>     <span class="dt">volume</span> = 3,</span>
<span id="cb1-11"><a></a>     <span class="dt">pages</span> = {e103},</span>
<span id="cb1-12"><a></a>     <span class="dt">journal</span> = {PeerJ Computer Science},</span>
<span id="cb1-13"><a></a>     <span class="dt">issn</span> = {2376-5992},</span>
<span id="cb1-14"><a></a>     <span class="dt">url</span> = {https://doi.org/10.7717/peerj-cs.103},</span>
<span id="cb1-15"><a></a>     <span class="dt">doi</span> = {10.7717/peerj-cs.103}</span>
<span id="cb1-16"><a></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pip-again" class="slide level2">
<h2>pip again</h2>
<ul>
<li>Just like NumPy, Matplotlib is a Python package which we install via <code>pip</code></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install sympy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>That might take a moment, when it does we can check it worked!</li>
</ul>
</section></section>
<section>
<section id="motivation" class="title-slide slide level1 center">
<h1>Motivation</h1>

</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<ul>
<li>Computers don’t hold numbers that precisely.</li>
</ul>
<div id="fa14358f" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="fl">10.0</span> <span class="op">**</span> <span class="dv">100</span> <span class="op">==</span> <span class="fl">10.0</span> <span class="op">**</span> <span class="dv">100</span> <span class="op">+</span> <span class="dv">47</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="647">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="fractions" class="slide level2">
<h2>Fractions</h2>
<ul>
<li>Much worse with fractions I find.</li>
</ul>
<div id="eff89e57" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="dv">1</span> <span class="op">/</span> <span class="dv">7000000</span> <span class="op">*</span> <span class="dv">7000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="648">
<pre><code>0.9999999999999999</code></pre>
</div>
</div>
</section>
<section id="floats" class="slide level2">
<h2>Floats:</h2>
<ul>
<li>The IEEE 754 Floating-Point Standard</li>
</ul>

<img style="filter:invert(1)" src="https://upload.wikimedia.org/wikipedia/commons/d/d2/Float_example.svg" class="r-stretch"><ul>
<li>It is basically scientific notation that fits in a fixed amount of characters.</li>
</ul>
</section>
<section id="what-is-it" class="slide level2">
<h2>What is it?</h2>
<ul>
<li>The IEEE 754 standard defines formats for representing floating-point numbers.</li>
<li>It specifies how floating-point numbers are stored and operated on in computer hardware.</li>
<li>Most modern CPUs adhere to this standard.</li>
</ul>
<div id="65970b3a" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a></a><span class="im">import</span> sys</span>
<span id="cb7-2"><a></a><span class="co"># Check the floating-point precision on your system</span></span>
<span id="cb7-3"><a></a>sys.float_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="649">
<pre><code>sys.float_info(max=1.7976931348623157e+308, max_exp=1024, max_10_exp=308, min=2.2250738585072014e-308, min_exp=-1021, min_10_exp=-307, dig=15, mant_dig=53, epsilon=2.220446049250313e-16, radix=2, rounds=1)</code></pre>
</div>
</div>
</section>
<section id="why-is-it-important" class="slide level2">
<h2>Why is it important?</h2>
<ul>
<li>Ensures portability and consistency of numerical computations across different systems.</li>
<li>Without a standard, the same calculation could yield different results on different machines.</li>
<li>Essential for reliable scientific and engineering software.</li>
</ul>
</section>
<section id="single-precision-float32" class="slide level2">
<h2>Single Precision (Float32)</h2>
<ul>
<li>Uses 32 bits to represent a number.</li>
<li>1 sign bit, 8 exponent bits, 23 significand (mantissa) bits.</li>
<li>Offers approximately 7 decimal digits of precision.</li>
</ul>
<div id="f368c91c" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-2"><a></a>np.float32(<span class="dv">1</span><span class="op">/</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="650">
<pre><code>0.14285715</code></pre>
</div>
</div>
</section>
<section id="double-precision-float64" class="slide level2">
<h2>Double Precision (Float64)</h2>
<ul>
<li>Uses 64 bits to represent a number.</li>
<li>1 sign bit, 11 exponent bits, 52 significand bits.</li>
<li>Offers approximately 15-17 decimal digits of precision. This is the default in Python and NumPy.</li>
</ul>
<div id="dc180d18" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a></a><span class="co"># Example of a float64 number (default in Python)</span></span>
<span id="cb11-2"><a></a><span class="dv">1</span><span class="op">/</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="651">
<pre><code>0.14285714285714285</code></pre>
</div>
</div>
</section>
<section id="special-values" class="slide level2">
<h2>Special Values</h2>
<ul>
<li><strong>Infinity <span class="math inline">\(\infty\)</span></strong>: Result of overflow or division by zero.</li>
</ul>
<div id="940b18e0" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a></a>lil <span class="op">=</span> np.finfo(np.float64).resolution <span class="co"># smallest recognizable value</span></span>
<span id="cb13-2"><a></a>big <span class="op">=</span> np.finfo(np.float64).<span class="bu">max</span> <span class="co"># biggest recognizable value</span></span>
<span id="cb13-3"><a></a>big <span class="op">/</span> lil</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="652">
<pre><code>inf</code></pre>
</div>
</div>
<ul>
<li><strong>Not a Number (NaN)</strong>: Result of undefined operations (e.g., <span class="math inline">\(0/0\)</span>, <span class="math inline">\(\sqrt{-1}\)</span>).</li>
</ul>
<div id="49297549" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a></a>np.sqrt(<span class="op">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="653">
<pre><code>nan</code></pre>
</div>
</div>
</section>
<section id="pitfall-1-limited-precision" class="slide level2">
<h2>Pitfall 1: Limited Precision</h2>
<ul>
<li>Not all real numbers can be represented exactly.</li>
<li>Decimal numbers like 0.1 often have an infinitely repeating binary representation.</li>
<li>This leads to small, unavoidable rounding errors.</li>
</ul>
<div id="8e86d7ea" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a></a><span class="fl">.1</span> <span class="op">+</span> <span class="fl">.2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="654">
<pre><code>0.30000000000000004</code></pre>
</div>
</div>
</section>
<section id="pitfall-2-accumulation" class="slide level2">
<h2>Pitfall 2: Accumulation</h2>
<ul>
<li>Small rounding errors can accumulate over many operations.</li>
<li>This can lead to significant inaccuracies in long computations or iterative algorithms.</li>
<li>Careful algorithm design and error analysis are crucial.</li>
</ul>
<div id="acb8355e" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a></a>total <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-2"><a></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100000</span>):</span>
<span id="cb19-3"><a></a>    total <span class="op">+=</span> <span class="fl">0.1</span></span>
<span id="cb19-4"><a></a>total, <span class="dv">100000</span> <span class="op">*</span> <span class="fl">0.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="655">
<pre><code>(10000.000000018848, 10000.0)</code></pre>
</div>
</div>
</section>
<section id="pitfall-3-comparison-issues" class="slide level2">
<h2>Pitfall 3: Comparison Issues</h2>
<ul>
<li>Due to limited precision, direct equality comparisons (<code>==</code>) between floating-point numbers are often unreliable.</li>
</ul>
<div id="cdb708e2" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a></a>(<span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="656">
<pre><code>0.3</code></pre>
</div>
</div>
<div id="bb6ac864" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a></a><span class="dv">1</span> <span class="op">/</span> <span class="dv">10</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">/</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="657">
<pre><code>0.30000000000000004</code></pre>
</div>
</div>
</section>
<section id="pitfall-4-subtractive-cancellation" class="slide level2">
<h2>Pitfall 4: Subtractive Cancellation</h2>
<ul>
<li>Occurs when subtracting two nearly equal numbers.</li>
<li>The most significant bits cancel out, leaving only the less significant bits.</li>
<li>Can drastically reduce the effective precision.</li>
</ul>
<div id="24ab0679" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a></a>x <span class="op">=</span> <span class="fl">1.0000000000000001</span></span>
<span id="cb25-2"><a></a>y <span class="op">=</span> <span class="fl">1.0000000000000000</span></span>
<span id="cb25-3"><a></a>x <span class="op">-</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="658">
<pre><code>0.0</code></pre>
</div>
</div>
</section></section>
<section>
<section id="symbolic-computation" class="title-slide slide level1 center">
<h1>Symbolic Computation</h1>

</section>
<section id="credit" class="slide level2">
<h2>Credit</h2>
<ul>
<li>The <a href="https://docs.sympy.org/latest/tutorials/intro-tutorial/">SymPy tutorial</a>.</li>
<li>SymPy solves the floating point problem.</li>
</ul>
</section>
<section id="quoth-sympy" class="slide level2">
<h2>Quoth SymPy</h2>
<blockquote>
<p>Symbolic computation deals with the computation of mathematical objects symbolically. This means that the mathematical objects are represented exactly, not approximately, and mathematical expressions with unevaluated variables are left in symbolic form.</p>
</blockquote>
</section>
<section id="non-symbolic-computation" class="slide level2">
<h2>Non-symbolic Computation</h2>
<ul>
<li>A common problem in computing is to compute the likes of distance between points separated by vectors.</li>
<li>Imagine two objects are separated by a horizontal displacement of <code>3</code> units, and vertical displacement of <code>4</code> units, and we wish to determine the minimum distance.</li>
<li>A straightforward application of the Pythagorean Theorem.</li>
</ul>
<div id="140a329c" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a></a>np.sqrt(<span class="dv">3</span> <span class="op">*</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">4</span> <span class="op">*</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="659">
<pre><code>5.0</code></pre>
</div>
</div>
</section>
<section id="pitfalls" class="slide level2">
<h2>Pitfalls</h2>
<ul>
<li>These distances quickly become inaccurate.</li>
</ul>
<div id="1c733d1d" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a></a>np.sqrt(<span class="dv">2</span> <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">4</span> <span class="op">*</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="660">
<pre><code>4.47213595499958</code></pre>
</div>
</div>
<ul>
<li>Then stuff like <a href="https://www.kezi.com/railroad-bridge-collapses-into-marys-river-in-corvallis/article_50b3ab98-cae2-11ef-86a9-2b8ecb0cf78c.html">this</a> happens: <img data-src="bridge.jpg"></li>
</ul>
</section>
<section id="symbolic-computation-1" class="slide level2">
<h2>Symbolic Computation</h2>
<ul>
<li>In point of fact, the solution to <span class="math inline">\(\sqrt{2^2 + 4*2}\)</span> is actually <span class="math inline">\(\sqrt{20}\)</span> and there’s no other graceful way to represent it.</li>
<li>So we’ll use <em>symbols</em> to store values.</li>
</ul>
<div id="2f3f0c7b" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a></a><span class="im">import</span> sympy</span>
<span id="cb31-2"><a></a>x <span class="op">=</span> sympy.symbols(<span class="st">'x'</span>)</span>
<span id="cb31-3"><a></a>y <span class="op">=</span> sympy.symbols(<span class="st">'y'</span>)</span>
<span id="cb31-4"><a></a>dist <span class="op">=</span> sympy.sqrt(x <span class="op">+</span> y)</span>
<span id="cb31-5"><a></a>dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="661">
<p><span class="math inline">\(\displaystyle \sqrt{x + y}\)</span></p>
</div>
</div>
</section>
<section id="expressions" class="slide level2">
<h2>Expressions</h2>
<ul>
<li>We term this a “symbolic expression”.</li>
<li>We can perform operations…</li>
</ul>
<div id="8578c372" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a></a><span class="dv">2</span> <span class="op">*</span> dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="662">
<p><span class="math inline">\(\displaystyle 2 \sqrt{x + y}\)</span></p>
</div>
</div>
<ul>
<li>We can add other symbols…</li>
</ul>
<div id="431077c0" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a></a>z <span class="op">=</span> sympy.symbols(<span class="st">'z'</span>)</span>
<span id="cb33-2"><a></a>z <span class="op">+</span> dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="663">
<p><span class="math inline">\(\displaystyle z + \sqrt{x + y}\)</span></p>
</div>
</div>
</section>
<section id="niceties" class="slide level2">
<h2>Niceties</h2>
<ul>
<li>We can declare multiple symbols at once:</li>
</ul>
<div id="24a9a280" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a></a>a, b, c <span class="op">=</span> sympy.symbols(<span class="st">'a b c'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>SymPy will automatically simplify.</li>
</ul>
<div id="ad0014ee" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a></a>sympy.sqrt(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="665">
<p><span class="math inline">\(\displaystyle 2 \sqrt{5}\)</span></p>
</div>
</div>
<ul>
<li>Compare:</li>
</ul>
<div id="7979cd33" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a></a>np.sqrt(<span class="dv">20</span>), np.sqrt(<span class="dv">5</span>), <span class="dv">2</span> <span class="op">*</span> np.sqrt(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="666">
<pre><code>(4.47213595499958, 2.23606797749979, 4.47213595499958)</code></pre>
</div>
</div>
</section></section>
<section>
<section id="operations" class="title-slide slide level1 center">
<h1>Operations</h1>

</section>
<section id="extended-floats" class="slide level2">
<h2>Extended Floats</h2>
<ul>
<li>SymPy uses floats by default, but doesn’t have to.</li>
<li>You can specify a number of decimals for any value.</li>
<li>We also should that SymPy contains some useful constants!</li>
</ul>
<div id="8e908c13" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a></a><span class="co"># "Evaluate as float to 100 digits"</span></span>
<span id="cb38-2"><a></a><span class="co"># We use sympy.py, not e.g. np.pi</span></span>
<span id="cb38-3"><a></a>sympy.pi.evalf(<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="667">
<p><span class="math inline">\(\displaystyle 3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068\)</span></p>
</div>
</div>
</section>
<section id="substitution" class="slide level2">
<h2>Substitution</h2>
<ul>
<li>Often we want to solve an equation algebraically and <em>also</em> know a numerical solution.</li>
<li>The usefulness of SymPy is to do both, and maximally simply the result to minimize error.</li>
<li>We can use <code>subs()</code> to get solutions given values.</li>
</ul>
<div id="a9880dc5" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a></a>dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="668">
<p><span class="math inline">\(\displaystyle \sqrt{x + y}\)</span></p>
</div>
</div>
</section>
<section id="value-substitution" class="slide level2">
<h2>Value Substitution</h2>
<ul>
<li>Substitute <code>3</code> for <code>x</code></li>
</ul>
<div id="e33bb024" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a></a>dist.subs(x, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="669">
<p><span class="math inline">\(\displaystyle \sqrt{y + 3}\)</span></p>
</div>
</div>
</section>
<section id="expression-substitution" class="slide level2">
<h2>Expression Substitution</h2>
<ul>
<li>Perhaps <code>y</code> is, itself, a distance expressed over a right triangle with sides <code>a</code> and <code>b</code></li>
</ul>
<div id="1f26b26f" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a></a>dist.subs(y,a<span class="op">*</span>a<span class="op">+</span>b<span class="op">*</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="670">
<p><span class="math inline">\(\displaystyle \sqrt{a^{2} + b^{2} + x}\)</span></p>
</div>
</div>
</section>
<section id="strings" class="slide level2">
<h2>Strings</h2>
<ul>
<li>Sometimes we want to take a Python expression and convert to a symbolic SymPy expression.</li>
</ul>
<div id="69f2d603" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a></a>str_expr <span class="op">=</span> <span class="st">"x**2 + 3*x - 1/2"</span></span>
<span id="cb42-2"><a></a><span class="im">from</span> sympy <span class="im">import</span> sympify</span>
<span id="cb42-3"><a></a>expr <span class="op">=</span> sympify(str_expr)</span>
<span id="cb42-4"><a></a>expr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="671">
<p><span class="math inline">\(\displaystyle x^{2} + 3 x - \frac{1}{2}\)</span></p>
</div>
</div>
<ul>
<li>Then calculate with <code>.subs()</code></li>
</ul>
<div id="a7c1a3a4" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a></a>expr.subs(x, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="672">
<p><span class="math inline">\(\displaystyle \frac{19}{2}\)</span></p>
</div>
</div>
</section>
<section id="functions" class="slide level2">
<h2>Functions</h2>
<ul>
<li>Sibling of <code>vectorize</code></li>
<li>Takes a SymPy expression, makes a Python function.</li>
</ul>
<div id="ae53a36d" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a></a>expr <span class="co"># so we remember.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="673">
<p><span class="math inline">\(\displaystyle x^{2} + 3 x - \frac{1}{2}\)</span></p>
</div>
</div>
<ul>
<li>Calculate…</li>
</ul>
<div id="baa6a98d" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a></a>f <span class="op">=</span> sympy.lambdify(x, expr, <span class="st">"scipy"</span>)</span>
<span id="cb45-2"><a></a>f(np.arange(<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="674">
<pre><code>array([ -0.5,   3.5,   9.5,  17.5,  27.5,  39.5,  53.5,  69.5,  87.5,
       107.5])</code></pre>
</div>
</div>
</section>
<section id="aside-scipynumpy" class="slide level2">
<h2>Aside: SciPy/NumPy</h2>
<ul>
<li><strong>Always</strong> use <code>lambdify</code> specified with <code>"scipy"</code> (or <code>"numpy"</code>) if you have SciPy or even just NumPy installed</li>
<li>It uses NumPy’s more powerful (than Python’s) mathematical operations.</li>
</ul>
</section>
<section id="aside-plots" class="slide level2">
<h2>Aside: Plots</h2>
<div id="da7bba59" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a></a><span class="co"># import sympy</span></span>
<span id="cb47-2"><a></a><span class="co"># from sympy.abc import x</span></span>
<span id="cb47-3"><a></a><span class="co"># import scipy</span></span>
<span id="cb47-4"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb47-5"><a></a>f <span class="op">=</span> sympy.lambdify(x,x<span class="op">*</span>x,<span class="st">"scipy"</span>)</span>
<span id="cb47-6"><a></a>xs <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>) </span>
<span id="cb47-7"><a></a>plt.plot(xs, f(xs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="08_sympy_files/figure-revealjs/cell-30-output-1.png" width="790" height="411"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="simplification" class="slide level2">
<h2>Simplification</h2>
<ul>
<li>If I use SymPy, I don’t have to remember this:</li>
</ul>
<div id="c392395e" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a></a>sympy.simplify(sympy.sin(x)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sympy.cos(x)<span class="op">**</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="676">
<p><span class="math inline">\(\displaystyle 1\)</span></p>
</div>
</div>
<ul>
<li>Or figure out this:</li>
</ul>
<div id="087b6b63" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a></a>sympy.simplify((x<span class="op">**</span><span class="dv">3</span> <span class="op">+</span> x<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> x <span class="op">-</span> <span class="dv">1</span>)<span class="op">/</span>(x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x <span class="op">+</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="677">
<p><span class="math inline">\(\displaystyle x - 1\)</span></p>
</div>
</div>
</section>
<section id="polynomials" class="slide level2">
<h2>Polynomials</h2>
<ul>
<li>Often we <em>don’t</em> want a simplified polynomial.</li>
</ul>
<div id="578fa121" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a></a>sympy.simplify(x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x <span class="op">+</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="678">
<p><span class="math inline">\(\displaystyle x^{2} + 2 x + 1\)</span></p>
</div>
</div>
<ul>
<li>We perhaps instead wish to <code>factor()</code></li>
</ul>
<div id="5b28728a" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a></a>sympy.factor(x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x <span class="op">+</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="679">
<p><span class="math inline">\(\displaystyle \left(x + 1\right)^{2}\)</span></p>
</div>
</div>
</section>
<section id="expand" class="slide level2">
<h2>Expand</h2>
<ul>
<li>We may also start with factored form.</li>
</ul>
<div id="e67c16cc" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a></a>eq <span class="op">=</span> x<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> (x<span class="op">+</span><span class="dv">1</span>) <span class="op">*</span> (x<span class="op">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>This can deceptively by made smaller by expanding it.</li>
</ul>
<div id="ca96de0a" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a></a>sympy.expand(eq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="681">
<p><span class="math inline">\(\displaystyle 1\)</span></p>
</div>
</div>
</section>
<section id="fractions-1" class="slide level2">
<h2>Fractions</h2>
<ul>
<li>We can also cancel out fractions.</li>
</ul>
<div id="92814d86" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a></a>eq <span class="op">=</span> (x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>x <span class="op">+</span> <span class="dv">1</span>)<span class="op">/</span>(x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> x)</span>
<span id="cb54-2"><a></a>eq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="682">
<p><span class="math inline">\(\displaystyle \frac{x^{2} + 2 x + 1}{x^{2} + x}\)</span></p>
</div>
</div>
<ul>
<li>Using <code>sympy.factor()</code></li>
</ul>
<div id="4a442b06" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a></a>sympy.factor(eq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="683">
<p><span class="math inline">\(\displaystyle \frac{x + 1}{x}\)</span></p>
</div>
</div>
</section>
<section id="powers" class="slide level2">
<h2>Powers</h2>
<ul>
<li>SymPy can also perform some simplifications related to exponention.</li>
<li>Movie size in memory is frame size time frame rate times duration.</li>
</ul>
<div id="9a9ee4b6" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a></a>eq <span class="op">=</span> x<span class="op">**</span><span class="dv">10</span><span class="op">*</span>x<span class="op">**</span><span class="dv">9</span><span class="op">*</span>x<span class="op">**</span><span class="dv">5</span><span class="op">*</span>x<span class="op">*</span><span class="dv">9</span> <span class="co"># Avatar in HD is ~4 hrs long at ~60fps</span></span>
<span id="cb56-2"><a></a>eq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="684">
<p><span class="math inline">\(\displaystyle 9 x^{25}\)</span></p>
</div>
</div>
<ul>
<li>Or just sub in <code>2</code></li>
</ul>
<div id="c01870de" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a></a>eq.subs(x,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="685">
<p><span class="math inline">\(\displaystyle 301989888\)</span></p>
</div>
</div>
</section></section>
<section>
<section id="calculus" class="title-slide slide level1 center">
<h1>Calculus</h1>

</section>
<section id="derivatives" class="slide level2">
<h2>Derivatives</h2>
<ul>
<li>We can calculate derivatives.</li>
</ul>
<div id="79276684" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a></a>sympy.diff(x<span class="op">*</span>x, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="686">
<p><span class="math inline">\(\displaystyle 2 x\)</span></p>
</div>
</div>
</section>
<section id="integrals" class="slide level2">
<h2>Integrals</h2>
<div id="bc9374b6" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a></a>sympy.integrate(sympy.sin(x), x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="687">
<p><span class="math inline">\(\displaystyle - \cos{\left(x \right)}\)</span></p>
</div>
</div>
</section>
<section id="evaluate-integrals" class="slide level2">
<h2>Evaluate Integrals</h2>
<ul>
<li>Give a variable a domain…</li>
</ul>
<div id="f6043d4c" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a></a>sympy.integrate(sympy.exp(x), (x, <span class="dv">0</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="688">
<p><span class="math inline">\(\displaystyle -1 + e\)</span></p>
</div>
</div>
</section>
<section id="limits" class="slide level2">
<h2>Limits</h2>
<ul>
<li>One famous problem is to compute the value of the following function as it approaches zero: <span class="math display">\[
\lim_{x\to 0} \frac{\sin{x}}{x}
\]</span></li>
</ul>
</section>
<section id="evaluate-limits" class="slide level2">
<h2>Evaluate limits</h2>
<div id="4bd26206" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a></a>eq <span class="op">=</span> sympy.sin(x)<span class="op">/</span>x</span>
<span id="cb61-2"><a></a>eq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="689">
<p><span class="math inline">\(\displaystyle \frac{\sin{\left(x \right)}}{x}\)</span></p>
</div>
</div>
<ul>
<li>We provide a variable and the value it approaches.</li>
</ul>
<div id="d0b97593" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a></a>sympy.limit(eq, x, <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="690">
<p><span class="math inline">\(\displaystyle 1\)</span></p>
</div>
</div>
</section>
<section id="viewing-limits" class="slide level2">
<h2>Viewing limits</h2>
<ul>
<li>To create a printable limit object that can be evaluated.
<ul>
<li>Capitalize</li>
<li>Resolve via <code>.doit</code></li>
<li>Also works for <code>Derivative</code> and <code>Integral</code></li>
</ul></li>
</ul>
<div id="cb1aabb7" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a></a>lm <span class="op">=</span> sympy.Limit(eq, x, <span class="dv">0</span>)</span>
<span id="cb63-2"><a></a>lm, lm.doit()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="691">
<pre><code>(Limit(sin(x)/x, x, 0, dir='+'), 1)</code></pre>
</div>
</div>
</section></section>
<section>
<section id="solutions" class="title-slide slide level1 center">
<h1>Solutions</h1>

</section>
<section id="solve-equations" class="slide level2">
<h2>Solve Equations</h2>
<blockquote>
<p><a href="https://docs.sympy.org/latest/guides/solving/index.html">The Python package SymPy can symbolically solve equations, differential equations, linear equations, nonlinear equations, matrix problems, inequalities, Diophantine equations, and evaluate integrals. SymPy can also solve numerically.</a></p>
</blockquote>
</section>
<section id="algebra" class="slide level2">
<h2>Algebra</h2>
<ul>
<li>We use the much nicer way to get variable names.</li>
</ul>
<div id="30bace38" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a></a><span class="im">from</span> sympy.abc <span class="im">import</span> x, y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We will aim to solve the following: <span class="math display">\[
x^2 = y
\]</span></li>
</ul>
</section>
<section id="write-in-sympy" class="slide level2">
<h2>Write in SymPy</h2>
<ul>
<li>SymPy, like many algebra systems, expects equations to be expressed as equal to zero.</li>
<li>We note the following equivalence. <span class="math display">\[
x^2 = y \equiv x^2 - y = 0
\]</span></li>
<li>So we write:</li>
</ul>
<div id="3eaa496f" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a></a>eq <span class="op">=</span> x<span class="op">*</span>x <span class="op">-</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="solve" class="slide level2">
<h2>Solve</h2>
<ul>
<li>To solve, we simply use <code>sympy.solve()</code>
<ul>
<li>We specify the equation to solve, and</li>
<li>The variable for which to solve.</li>
</ul></li>
</ul>
<div id="65a357aa" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a></a>sympy.solve(eq, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="694">
<pre><code>[-sqrt(y), sqrt(y)]</code></pre>
</div>
</div>
<ul>
<li>We could also do:</li>
</ul>
<div id="6ca67625" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a></a>sympy.solve(eq, y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="695">
<pre><code>[x**2]</code></pre>
</div>
</div>
</section>
<section id="and-eq" class="slide level2">
<h2><code>==</code> and <code>Eq()</code></h2>
<ul>
<li>SymPy, for a variety of good reasons, struggles with <code>==</code> in equations, so use <code>Eq()</code></li>
</ul>
<div id="171cb281" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a></a>eq <span class="op">=</span> sympy.Eq(x<span class="op">*</span>x,y)</span>
<span id="cb71-2"><a></a>eq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="696">
<p><span class="math inline">\(\displaystyle x^{2} = y\)</span></p>
</div>
</div>
<ul>
<li>It works as expected.</li>
</ul>
<div id="e9fab676" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a></a>sympy.solve(eq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="697">
<pre><code>[{y: x**2}]</code></pre>
</div>
</div>
</section>
<section id="aside-rationals" class="slide level2">
<h2>Aside: Rationals</h2>
<ul>
<li>The is true for fractions with <code>Rational()</code></li>
</ul>
<div id="35106b55" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a></a>sympy.Rational(<span class="dv">5</span><span class="op">/</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="698">
<p><span class="math inline">\(\displaystyle \frac{5}{2}\)</span></p>
</div>
</div>
<ul>
<li>In general, if something would be “weird” with Sympy, there is a capitalized name that does what you would expect.</li>
<li>Just check the documentation.</li>
</ul>
</section></section>
<section>
<section id="odes" class="title-slide slide level1 center">
<h1>ODEs</h1>

</section>
<section id="ordinary-differential-equations" class="slide level2">
<h2>Ordinary Differential Equations</h2>
<blockquote>
<p>A differential equation is an equation that relates one or more unknown functions and their derivatives.</p>
</blockquote>
<blockquote>
<p>An ordinary differential equation (ODE) is a differential equation (DE) dependent on only a single independent variable.</p>
</blockquote>
</section>
<section id="credit-1" class="slide level2">
<h2>Credit</h2>
<ul>
<li><a href="https://www.sympy.org/scipy-2017-codegen-tutorial/notebooks/20-ordinary-differential-equations.html">“Numerical integration of Ordinary Differential Equations”</a></li>
</ul>
</section>
<section id="equation" class="slide level2">
<h2>Equation</h2>
<ul>
<li>Consider the decay of tritium as an example.</li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="index.html">Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>